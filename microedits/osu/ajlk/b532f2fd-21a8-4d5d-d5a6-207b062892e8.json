{
  "userid": "ajlk",
  "guid": "b532f2fd-21a8-4d5d-d5a6-207b062892e8",
  "lastStatus": "published",
  "items": [
    {
      "seqNo": 0,
      "time": 1354910981,
      "scriptId": "zbgy",
      "historyId": "252047389818781908761fe6a0b-2889-4eb5-85ab-af7a2750ad3c",
      "updateSize": 31167,
      "ast": {
        "textVersion": "v2.2,js,ctx",
        "jsonVersion": "v1.0,resolved,short",
        "name": "tower defense",
        "comment": "A library to create tower defense games. See main for example.",
        "icon": "controller",
        "color": "#ff9955bb",
        "autoIcon": "controller",
        "autoColor": "#9955bb",
        "platform": "current",
        "rootId": "XnkHUcm4ycYHqZbIXU2WJ2Sg",
        "showAd": false,
        "isLibrary": true,
        "allowExport": false,
        "hasUniqueIds": false,
        "decls": [
          {
            "name": "example",
            "inParameters": [],
            "outParameters": [],
            "isPrivate": false,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "text": "This library maintains a set of towers defending against attackers. The towers do not move while the attacker may have any trajectory.",
                "nodeType": "comment",
                "id": "LtHE8x99egqH6vt6iw22KtOO"
              },
              {
                "text": "## Initialization",
                "nodeType": "comment",
                "id": "MFM2Ny9f2eYx2NP74NZwiYxd"
              },
              {
                "text": "The library works with a board so it needs to be initialized once with the board you are using in your game (a landscape board in this case).",
                "nodeType": "comment",
                "id": "oBkQTlrdW6YYTuqtBjVt3kUt"
              },
              {
                "expr": "$mEexi3t2BzFDXxayGq6MtIeML0 ,:= :media .create_portrait_board ,( ,4 ,8 ,0 ,, ,8 ,0 ,0 ,)",
                "nodeType": "exprStmt",
                "id": "mEexi3t2BzFDXxayGq6MtIeM",
                "locals": [
                  {
                    "name": "board",
                    "type": "Board",
                    "nodeType": "localDef",
                    "id": "mEexi3t2BzFDXxayGq6MtIeML0"
                  }
                ]
              },
              {
                "expr": "$mEexi3t2BzFDXxayGq6MtIeML0 .set_background ,( :colors .orange ,)",
                "nodeType": "exprStmt",
                "id": "xRFVs6TTomGAvxY9KQRyK9an",
                "locals": []
              },
              {
                "expr": "$mEexi3t2BzFDXxayGq6MtIeML0 .post_to_wall",
                "nodeType": "exprStmt",
                "id": "LsuDSB3DTbSML4CD4DdJA4nL",
                "locals": []
              },
              {
                "text": "Make sure to call 'initialize' once with the game board.",
                "nodeType": "comment",
                "id": "xD4iZ0aQyuApe2DnZ62ZUw1q"
              },
              {
                "expr": ":code #xQC2FHB0LY4zqvHOd2THDOmR ,( $mEexi3t2BzFDXxayGq6MtIeML0 ,)",
                "nodeType": "exprStmt",
                "id": "XoBb2rrUSc41HQIu04A0bJ1o",
                "locals": []
              },
              {
                "text": "## Towers",
                "nodeType": "comment",
                "id": "ji1LcoMj5Ol1g7ikzLiT2u20"
              },
              {
                "text": "You can add any kind of sprite (ellipse, rectangle, picture,...) as a 'tower'. When adding a tower, you specify also its characteristics:",
                "nodeType": "comment",
                "id": "H7hOI3DyjIXoPL8aZuxmJvSB"
              },
              {
                "text": "* the range (200 here)",
                "nodeType": "comment",
                "id": "cb6dct92pvzPqjenD2CEvftu"
              },
              {
                "text": "* the power of the bullets (35 here)",
                "nodeType": "comment",
                "id": "NVLJJ3vUzzWEfX4TH7rKLQZM"
              },
              {
                "text": "* the reload time in seconds",
                "nodeType": "comment",
                "id": "svBRVGzUtFyWBxjcdVjkqb34"
              },
              {
                "text": "* the color of the bullets",
                "nodeType": "comment",
                "id": "xMQGuDoKwvwW6NPS6v7xRfqY"
              },
              {
                "text": "Remember, towers are not supposed to move.",
                "nodeType": "comment",
                "id": "vtpphsOQx49LjC2utDzseXGN"
              },
              {
                "bound": ",5",
                "body": [
                  {
                    "expr": "$fFyIEH4y02uGdMoppAiBYMfuL0 ,:= $mEexi3t2BzFDXxayGq6MtIeML0 .create_ellipse ,( ,5 ,0 ,, ,5 ,0 ,)",
                    "nodeType": "exprStmt",
                    "id": "fFyIEH4y02uGdMoppAiBYMfu",
                    "locals": [
                      {
                        "name": "t",
                        "type": "Sprite",
                        "nodeType": "localDef",
                        "id": "fFyIEH4y02uGdMoppAiBYMfuL0"
                      }
                    ]
                  },
                  {
                    "expr": "$fFyIEH4y02uGdMoppAiBYMfuL0 .set_color ,( :colors .blue ,)",
                    "nodeType": "exprStmt",
                    "id": "XNIvsDIKH7ScVoRqo928k4Cu",
                    "locals": []
                  },
                  {
                    "expr": "$fFyIEH4y02uGdMoppAiBYMfuL0 .set_pos ,( ,5 ,0 ,+ $arSE3Y2LloQnYizXaetb6sweB0 ,* ,1 ,0 ,0 ,, ,4 ,8 ,0 ,)",
                    "nodeType": "exprStmt",
                    "id": "xwUNisX91YQBrffSd2VGxBVG",
                    "locals": []
                  },
                  {
                    "text": "Let's add 't' as a tower",
                    "nodeType": "comment",
                    "id": "xVBsns1eTUy3ZGMUIgNdffDZ"
                  },
                  {
                    "expr": ":code #uvQJT7Dmz9hBIwkVxxpUyOUJ ,( $fFyIEH4y02uGdMoppAiBYMfuL0 ,, ,2 ,0 ,0 ,, ,3 ,5 ,, ,1 ,, :colors .random ,)",
                    "nodeType": "exprStmt",
                    "id": "xX9vC4JALbbdu66i4vx4S3AT",
                    "locals": []
                  }
                ],
                "nodeType": "for",
                "id": "arSE3Y2LloQnYizXaetb6swe",
                "locals": [
                  {
                    "name": "i",
                    "type": "Number",
                    "nodeType": "localDef",
                    "id": "arSE3Y2LloQnYizXaetb6sweB0"
                  }
                ]
              },
              {
                "text": "## Attackers",
                "nodeType": "comment",
                "id": "xduQCWSgOdov6AC2ODrSn526"
              },
              {
                "text": "You can also add any kind of sprite as an 'attacker'. When you add the attacker, you also specify its life (65 here).",
                "nodeType": "comment",
                "id": "x678n1b8O9tF4w577dedfBnb"
              },
              {
                "text": "Attackers can freely move on the board.",
                "nodeType": "comment",
                "id": "vRTlmyhCC1dl4VdyW0ttFk4a"
              },
              {
                "bound": ",5",
                "body": [
                  {
                    "expr": "$c0sDnJ4aXbmDfCwiQ9f1LS1FL0 ,:= $mEexi3t2BzFDXxayGq6MtIeML0 .create_ellipse ,( ,2 ,0 ,, ,2 ,0 ,)",
                    "nodeType": "exprStmt",
                    "id": "c0sDnJ4aXbmDfCwiQ9f1LS1F",
                    "locals": [
                      {
                        "name": "a",
                        "type": "Sprite",
                        "nodeType": "localDef",
                        "id": "c0sDnJ4aXbmDfCwiQ9f1LS1FL0"
                      }
                    ]
                  },
                  {
                    "expr": "$c0sDnJ4aXbmDfCwiQ9f1LS1FL0 .set_pos ,( ,2 ,4 ,0 ,, ,5 ,0 ,+ $mA4NBGJxDGwVwJFDCa8naIXUB0 ,* ,7 ,5 ,)",
                    "nodeType": "exprStmt",
                    "id": "eZNvcH3H4noicHFj4l47oE0I",
                    "locals": []
                  },
                  {
                    "expr": "$c0sDnJ4aXbmDfCwiQ9f1LS1FL0 .set_speed ,( ,0 ,, ,5 ,0 ,)",
                    "nodeType": "exprStmt",
                    "id": "xYh513u4Vj4CQmoSHXn5LOmY",
                    "locals": []
                  },
                  {
                    "expr": "$c0sDnJ4aXbmDfCwiQ9f1LS1FL0 .set_color ,( :colors .red ,)",
                    "nodeType": "exprStmt",
                    "id": "xVT7AnIuznRzGTeEPrr2Zoyb",
                    "locals": []
                  },
                  {
                    "text": "Let's add the `a` as an attacker",
                    "nodeType": "comment",
                    "id": "NxWM3iKJp94gFs4U7CgdXjvL"
                  },
                  {
                    "expr": ":code #qzFUk5Ix9k0vXz9Odq4oByYT ,( $c0sDnJ4aXbmDfCwiQ9f1LS1FL0 ,, ,6 ,5 ,)",
                    "nodeType": "exprStmt",
                    "id": "dhytH5QEVzWb4WYVurWIZQkw",
                    "locals": []
                  }
                ],
                "nodeType": "for",
                "id": "mA4NBGJxDGwVwJFDCa8naIXU",
                "locals": [
                  {
                    "name": "i1",
                    "type": "Number",
                    "nodeType": "localDef",
                    "id": "mA4NBGJxDGwVwJFDCa8naIXUB0"
                  }
                ]
              },
              {
                "text": "## Gameloop",
                "nodeType": "comment",
                "id": "uVFVhDJcEl7A26zlle5bOiag"
              },
              {
                "text": "The `while` loop below simulates the gameloop event. Make sure to call the `evolve` action after calling the board `evolve` action.",
                "nodeType": "comment",
                "id": "vjlrdgZ5rlGF1r5L9JkI1sZt"
              },
              {
                "condition": "T",
                "body": [
                  {
                    "expr": "$mEexi3t2BzFDXxayGq6MtIeML0 .evolve",
                    "nodeType": "exprStmt",
                    "id": "fp8q1PTnTbIz5HAjyrnCUmmG",
                    "locals": []
                  },
                  {
                    "text": "Make sure to call `evolve` after the board `evolve`.",
                    "nodeType": "comment",
                    "id": "cmjm5wR622gKoPK3F4eugaMR"
                  },
                  {
                    "expr": ":code #ZzRnb4X997IaHrmhEbCasY4i",
                    "nodeType": "exprStmt",
                    "id": "UcqnTz4D7xiVcB4ropr3xTxz",
                    "locals": []
                  },
                  {
                    "expr": "$mEexi3t2BzFDXxayGq6MtIeML0 .update_on_wall",
                    "nodeType": "exprStmt",
                    "id": "q6V8jyhnRrfyiy28V8ikGUmy",
                    "locals": []
                  }
                ],
                "nodeType": "while",
                "id": "y2npOS7GzzUCrg1CCm322DPK",
                "locals": []
              }
            ],
            "id": "MWghmQ74tWn9K6GH1fII0CSI"
          },
          {
            "nodeType": "record",
            "name": "tower",
            "sourceName": "tower",
            "comment": "",
            "category": "object",
            "isCloudEnabled": false,
            "keys": [],
            "fields": [
              {
                "nodeType": "recordField",
                "name": "sprite",
                "type": "Sprite",
                "id": "soerdVQzQ4vdR7COd6Wn2lsx"
              },
              {
                "nodeType": "recordField",
                "name": "range",
                "type": "Number",
                "id": "xnqwPe9QPsWeXzptTlxnMzFA"
              },
              {
                "nodeType": "recordField",
                "name": "reload",
                "type": "Number",
                "id": "jXZBUhIkupkyL6Qo1vqnmwIi"
              },
              {
                "nodeType": "recordField",
                "name": "energy",
                "type": "Number",
                "id": "J6OtsUI1D9PNkEpHa4sGm7Qx"
              },
              {
                "nodeType": "recordField",
                "name": "next shot",
                "type": "Number",
                "id": "qyPtLucAPGjVFIU4qyeOSfGk"
              },
              {
                "nodeType": "recordField",
                "name": "bullet color",
                "type": "Color",
                "id": "nteVCA3ghkXCW6GIwBijF7dZ"
              }
            ],
            "id": "DFiSxpS2z431gZP9UTl72lg9"
          },
          {
            "nodeType": "record",
            "name": "attacker",
            "sourceName": "attacker",
            "comment": "",
            "category": "object",
            "isCloudEnabled": false,
            "keys": [],
            "fields": [
              {
                "nodeType": "recordField",
                "name": "sprite",
                "type": "Sprite",
                "id": "dRT4d2NKg2RHs4eeK9cP8ixK"
              },
              {
                "nodeType": "recordField",
                "name": "max speed",
                "type": "Number",
                "id": "tBQrHP9pMW9cudE2wEg40Fsr"
              },
              {
                "nodeType": "recordField",
                "name": "life",
                "type": "Number",
                "id": "xWhHEszHwFILvNPW8bAh8B4X"
              },
              {
                "nodeType": "recordField",
                "name": "max life",
                "type": "Number",
                "id": "E5DrXclhn4XHXu9xm2uN060M"
              }
            ],
            "id": "RMDI0jsK3ubgYNNvIeKVzGNv"
          },
          {
            "name": "initialize",
            "inParameters": [
              {
                "name": "board",
                "type": "Board",
                "nodeType": "localDef",
                "id": "xQC2FHB0LY4zqvHOd2THDOmRP0"
              }
            ],
            "outParameters": [
              {
                "name": "tower set",
                "type": "Sprite Set",
                "nodeType": "localDef",
                "id": "xQC2FHB0LY4zqvHOd2THDOmRP1"
              },
              {
                "name": "attacker set",
                "type": "Sprite Set",
                "nodeType": "localDef",
                "id": "xQC2FHB0LY4zqvHOd2THDOmRP2"
              }
            ],
            "isPrivate": false,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "text": "Initializes the library, returns the sets of towers and attackers.",
                "nodeType": "comment",
                "id": "NWqlUdHMGlhHEtVaIKGt8HaZ"
              },
              {
                "expr": ":data #rU0VbM5g9eNQBN84xi1Xfyaw ,:= $xQC2FHB0LY4zqvHOd2THDOmRP0",
                "nodeType": "exprStmt",
                "id": "k9LiHK2syNDgaJ4ogN7y3Tfu",
                "locals": []
              },
              {
                "expr": ":/267b #xjL80eKjfViGRrmIGfIde4Fd #xIUy33R9FTdTX1NnCH2mVAOj ,( $xQC2FHB0LY4zqvHOd2THDOmRP0 ,)",
                "nodeType": "exprStmt",
                "id": "dNOLNUTPZeH4UKCEcFrwXcjA",
                "locals": []
              },
              {
                "text": "Create sets",
                "nodeType": "comment",
                "id": "ejZ7ZkmGI64PHzWfurDgEmoi"
              },
              {
                "expr": ":data #xfvWQNtvfKCzuXVhknH4gwwE ,:= :data #rU0VbM5g9eNQBN84xi1Xfyaw .create_sprite_set",
                "nodeType": "exprStmt",
                "id": "RKRUldCIGNYtpsN7UXWUAIYb",
                "locals": []
              },
              {
                "expr": "$xQC2FHB0LY4zqvHOd2THDOmRP1 ,:= :data #xfvWQNtvfKCzuXVhknH4gwwE",
                "nodeType": "exprStmt",
                "id": "WEkIMvF44bzd4a1AaNDM2fa2",
                "locals": []
              },
              {
                "expr": ":data #FdyzjG6w1KZ5fgxxFI6V8FnD ,:= :data #rU0VbM5g9eNQBN84xi1Xfyaw .create_sprite_set",
                "nodeType": "exprStmt",
                "id": "eGoNEHtQkYEA9SciOuRrclWm",
                "locals": []
              },
              {
                "expr": "$xQC2FHB0LY4zqvHOd2THDOmRP2 ,:= :data #FdyzjG6w1KZ5fgxxFI6V8FnD",
                "nodeType": "exprStmt",
                "id": "pFUff94C5xNKaNu38EqlqGv4",
                "locals": []
              },
              {
                "expr": ":data #Tnk15jveIb2DD9EFdOup1pwv ,:= :data #rU0VbM5g9eNQBN84xi1Xfyaw .create_sprite_set",
                "nodeType": "exprStmt",
                "id": "ufnVtpQVZjkiW4LsXnwpRZgJ",
                "locals": []
              },
              {
                "expr": ":data #D1OUx1tH7mnfiwki4Zynih7V ,:= :data #rU0VbM5g9eNQBN84xi1Xfyaw .create_sprite_set",
                "nodeType": "exprStmt",
                "id": "xFDTgF4e37lo4EQ2YNP3wUFj",
                "locals": []
              },
              {
                "text": "Create collections",
                "nodeType": "comment",
                "id": "xfotwHxA8yNKS3vvj25MyKaK"
              },
              {
                "expr": ":records #O2549tFd2N7eNsF4zAdbOTrB .clear",
                "nodeType": "exprStmt",
                "id": "xJLgmJNRgza9ZYB910qjnPIC",
                "locals": []
              },
              {
                "text": "Keeping track of time",
                "nodeType": "comment",
                "id": "ldcdBtg2SMGWVExLrIC2Nkse"
              },
              {
                "expr": ":data #xR3Vy4LO3QjZq7jdxtZAg785 ,:= :time .now",
                "nodeType": "exprStmt",
                "id": "x4IMaaZhceb4XFvO2rUFI1oJ",
                "locals": []
              },
              {
                "expr": ":data #iA6QEJXaFbriHztBBoJNdyEd ,:= ,0",
                "nodeType": "exprStmt",
                "id": "Rh8S8KA46HlBTu61V5wnZ8vF",
                "locals": []
              }
            ],
            "id": "xQC2FHB0LY4zqvHOd2THDOmR"
          },
          {
            "name": "evolve",
            "inParameters": [],
            "outParameters": [],
            "isPrivate": false,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "expr": "$I0VfwKE2Kytkn44uwJhWvKkkL0 ,:= :time .now .subtract ,( :data #xR3Vy4LO3QjZq7jdxtZAg785 ,)",
                "nodeType": "exprStmt",
                "id": "I0VfwKE2Kytkn44uwJhWvKkk",
                "locals": [
                  {
                    "name": "elapsed",
                    "type": "Number",
                    "nodeType": "localDef",
                    "id": "I0VfwKE2Kytkn44uwJhWvKkkL0"
                  }
                ]
              },
              {
                "text": "Find attacker, apply bullets then shoot with tower if needed",
                "nodeType": "comment",
                "id": "IozR5Hz82fNC1nRgoM5Is3Jv"
              },
              {
                "collection": ":data #FdyzjG6w1KZ5fgxxFI6V8FnD",
                "conditions": [
                  {
                    "condition": "T",
                    "nodeType": "where",
                    "id": "hqd4k43rpXteWf5kBOvpXSVV",
                    "locals": []
                  }
                ],
                "body": [
                  {
                    "expr": ":code #gmGrS4wcK8sDPLo2QSBNQJky ,( $xnXsYgk4HxQwnJ8s2EXo2zcCB0 ,)",
                    "nodeType": "exprStmt",
                    "id": "x8Qu4dEM1DM24Tfn1TLTL93N",
                    "locals": []
                  },
                  {
                    "nodeType": "if",
                    "condition": "$xnXsYgk4HxQwnJ8s2EXo2zcCB0 .is_visible",
                    "thenBody": [
                      {
                        "expr": ":code #LFLUSzqu4jfUPSNFocQaZGO4 ,( $xnXsYgk4HxQwnJ8s2EXo2zcCB0 ,, $I0VfwKE2Kytkn44uwJhWvKkkL0 ,)",
                        "nodeType": "exprStmt",
                        "id": "xoa0KGH2aZm2sRdOdvpCmt13",
                        "locals": []
                      }
                    ],
                    "isElseIf": false,
                    "id": "xRtrDdh2AzZg64QhizrxjXZm",
                    "locals": []
                  }
                ],
                "nodeType": "foreach",
                "id": "xnXsYgk4HxQwnJ8s2EXo2zcC",
                "locals": [
                  {
                    "name": "attack",
                    "type": "Sprite",
                    "nodeType": "localDef",
                    "id": "xnXsYgk4HxQwnJ8s2EXo2zcCB0"
                  }
                ]
              },
              {
                "text": "Dismiss bullets that missed target",
                "nodeType": "comment",
                "id": "wDc1FCtRLvVYJei4BqYfA8KH"
              },
              {
                "collection": ":data #Tnk15jveIb2DD9EFdOup1pwv",
                "conditions": [
                  {
                    "condition": "T",
                    "nodeType": "where",
                    "id": "onRWHU11BUDUYBio0KdEWYBJ",
                    "locals": []
                  }
                ],
                "body": [
                  {
                    "expr": "$S7xktIP4PIGr7l9YTCIMwr2hL0 ,:= :records #O2549tFd2N7eNsF4zAdbOTrB .at ,( $ExMpx2yCsw12IzZvrZB7dZZNB0 ,) .tower .get",
                    "nodeType": "exprStmt",
                    "id": "S7xktIP4PIGr7l9YTCIMwr2h",
                    "locals": [
                      {
                        "name": "t",
                        "type": "{\"o\":\"tower\"}",
                        "nodeType": "localDef",
                        "id": "S7xktIP4PIGr7l9YTCIMwr2hL0"
                      }
                    ]
                  },
                  {
                    "expr": "$IClLiNMogKWTr049GAre5vJ9L0 ,:= $S7xktIP4PIGr7l9YTCIMwr2hL0 .sprite .get",
                    "nodeType": "exprStmt",
                    "id": "IClLiNMogKWTr049GAre5vJ9",
                    "locals": [
                      {
                        "name": "ts",
                        "type": "Sprite",
                        "nodeType": "localDef",
                        "id": "IClLiNMogKWTr049GAre5vJ9L0"
                      }
                    ]
                  },
                  {
                    "nodeType": "if",
                    "condition": ":math .abs ,( $IClLiNMogKWTr049GAre5vJ9L0 .x ,- $ExMpx2yCsw12IzZvrZB7dZZNB0 .x ,) ,≥ $S7xktIP4PIGr7l9YTCIMwr2hL0 .range .get ,or :math .abs ,( $IClLiNMogKWTr049GAre5vJ9L0 .y ,- $ExMpx2yCsw12IzZvrZB7dZZNB0 .y ,) ,≥ $S7xktIP4PIGr7l9YTCIMwr2hL0 .range .get",
                    "thenBody": [
                      {
                        "expr": ":code #xTf4Bhlic0bDBmTq19YNCDw4 ,( $ExMpx2yCsw12IzZvrZB7dZZNB0 ,)",
                        "nodeType": "exprStmt",
                        "id": "YOBrdtGbhrB4jBeg22auywDG",
                        "locals": []
                      }
                    ],
                    "isElseIf": false,
                    "id": "lvQtq82D8It0dRaZ1S9nhZ4A",
                    "locals": []
                  }
                ],
                "nodeType": "foreach",
                "id": "ExMpx2yCsw12IzZvrZB7dZZN",
                "locals": [
                  {
                    "name": "bullet",
                    "type": "Sprite",
                    "nodeType": "localDef",
                    "id": "ExMpx2yCsw12IzZvrZB7dZZNB0"
                  }
                ]
              },
              {
                "expr": ":/267b #xjL80eKjfViGRrmIGfIde4Fd #vkK4u6PrWz4xNVlQoNAoZiXD",
                "nodeType": "exprStmt",
                "id": "TIBwklq97QWVxPkpE1FdT6Va",
                "locals": []
              }
            ],
            "id": "ZzRnb4X997IaHrmhEbCasY4i"
          },
          {
            "name": "tower set",
            "comment": "",
            "type": "Sprite Set",
            "isReadonly": false,
            "isTransient": true,
            "nodeType": "data",
            "id": "xfvWQNtvfKCzuXVhknH4gwwE"
          },
          {
            "name": "attacker set",
            "comment": "",
            "type": "Sprite Set",
            "isReadonly": false,
            "isTransient": true,
            "nodeType": "data",
            "id": "FdyzjG6w1KZ5fgxxFI6V8FnD"
          },
          {
            "name": "bullet set",
            "comment": "",
            "type": "Sprite Set",
            "isReadonly": false,
            "isTransient": true,
            "nodeType": "data",
            "id": "Tnk15jveIb2DD9EFdOup1pwv"
          },
          {
            "name": "board",
            "comment": "",
            "type": "Board",
            "isReadonly": false,
            "isTransient": true,
            "nodeType": "data",
            "id": "rU0VbM5g9eNQBN84xi1Xfyaw"
          },
          {
            "name": "add tower",
            "inParameters": [
              {
                "name": "sprite",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "uvQJT7Dmz9hBIwkVxxpUyOUJP0"
              },
              {
                "name": "range",
                "type": "Number",
                "nodeType": "localDef",
                "id": "uvQJT7Dmz9hBIwkVxxpUyOUJP1"
              },
              {
                "name": "power",
                "type": "Number",
                "nodeType": "localDef",
                "id": "uvQJT7Dmz9hBIwkVxxpUyOUJP2"
              },
              {
                "name": "reload",
                "type": "Number",
                "nodeType": "localDef",
                "id": "uvQJT7Dmz9hBIwkVxxpUyOUJP3"
              },
              {
                "name": "bullet color",
                "type": "Color",
                "nodeType": "localDef",
                "id": "uvQJT7Dmz9hBIwkVxxpUyOUJP4"
              }
            ],
            "outParameters": [],
            "isPrivate": false,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "text": "Adds a tower with a range, power and reload in seconds.",
                "nodeType": "comment",
                "id": "xKFaLECP2fOwwjhRZYB08i7q"
              },
              {
                "nodeType": "if",
                "condition": ":data #xfvWQNtvfKCzuXVhknH4gwwE .add ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP0 ,)",
                "thenBody": [
                  {
                    "text": "Normalizing data",
                    "nodeType": "comment",
                    "id": "x5rNx7nSGpoyWRQ3Lik5m8ic"
                  },
                  {
                    "expr": "$uvQJT7Dmz9hBIwkVxxpUyOUJP1 ,:= :math .max ,( ,2 ,5 ,, $uvQJT7Dmz9hBIwkVxxpUyOUJP1 ,)",
                    "nodeType": "exprStmt",
                    "id": "s6NEnbsp7wQsObjILOyNHye4",
                    "locals": []
                  },
                  {
                    "expr": "$uvQJT7Dmz9hBIwkVxxpUyOUJP2 ,:= :math .max ,( ,5 ,, $uvQJT7Dmz9hBIwkVxxpUyOUJP2 ,)",
                    "nodeType": "exprStmt",
                    "id": "R9m9Vaq3W4yvwk6uwBhuCW4q",
                    "locals": []
                  },
                  {
                    "expr": "$uvQJT7Dmz9hBIwkVxxpUyOUJP3 ,:= :math .max ,( ,0 ,. ,2 ,, $uvQJT7Dmz9hBIwkVxxpUyOUJP3 ,)",
                    "nodeType": "exprStmt",
                    "id": "xWQskXc7gjt5f0o3kC42wAm7",
                    "locals": []
                  },
                  {
                    "expr": "$xi4DlbnHmwwbcTA2D1Kj4ERtL0 ,:= :records #DFiSxpS2z431gZP9UTl72lg9 .create",
                    "nodeType": "exprStmt",
                    "id": "xi4DlbnHmwwbcTA2D1Kj4ERt",
                    "locals": [
                      {
                        "name": "t",
                        "type": "{\"o\":\"tower\"}",
                        "nodeType": "localDef",
                        "id": "xi4DlbnHmwwbcTA2D1Kj4ERtL0"
                      }
                    ]
                  },
                  {
                    "expr": "$xi4DlbnHmwwbcTA2D1Kj4ERtL0 .sprite .set ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP0 ,)",
                    "nodeType": "exprStmt",
                    "id": "HkQoOv4AQEmirjtxLEVGtvr6",
                    "locals": []
                  },
                  {
                    "expr": "$xi4DlbnHmwwbcTA2D1Kj4ERtL0 .range .set ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP1 ,)",
                    "nodeType": "exprStmt",
                    "id": "F8b2Tg23nMZtR0CsnT2gjmnX",
                    "locals": []
                  },
                  {
                    "expr": "$xi4DlbnHmwwbcTA2D1Kj4ERtL0 .energy .set ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP2 ,)",
                    "nodeType": "exprStmt",
                    "id": "uFmd6oUb2EcNmUaZhy78FIEe",
                    "locals": []
                  },
                  {
                    "expr": "$xi4DlbnHmwwbcTA2D1Kj4ERtL0 .reload .set ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP3 ,)",
                    "nodeType": "exprStmt",
                    "id": "npt10jS7fyhEiyqkcrYiyctR",
                    "locals": []
                  },
                  {
                    "expr": "$xi4DlbnHmwwbcTA2D1Kj4ERtL0 .bullet_color .set ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP4 ,)",
                    "nodeType": "exprStmt",
                    "id": "uRS3QDqI4Q2HaNoYoPk7qgK8",
                    "locals": []
                  },
                  {
                    "expr": "$xqGFrJ9gVn5s8TmzQL7UySqGL0 ,:= :data #rU0VbM5g9eNQBN84xi1Xfyaw .create_ellipse ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP1 ,* ,2 ,, $uvQJT7Dmz9hBIwkVxxpUyOUJP1 ,* ,2 ,)",
                    "nodeType": "exprStmt",
                    "id": "xqGFrJ9gVn5s8TmzQL7UySqG",
                    "locals": [
                      {
                        "name": "sprite range",
                        "type": "Sprite",
                        "nodeType": "localDef",
                        "id": "xqGFrJ9gVn5s8TmzQL7UySqGL0"
                      }
                    ]
                  },
                  {
                    "expr": "$xqGFrJ9gVn5s8TmzQL7UySqGL0 .set_pos ,( $uvQJT7Dmz9hBIwkVxxpUyOUJP0 .x ,, $uvQJT7Dmz9hBIwkVxxpUyOUJP0 .y ,)",
                    "nodeType": "exprStmt",
                    "id": "xTKaUcBXJ1swJqoJTq7U03uO",
                    "locals": []
                  },
                  {
                    "expr": "$xqGFrJ9gVn5s8TmzQL7UySqGL0 .set_opacity ,( ,0 ,)",
                    "nodeType": "exprStmt",
                    "id": "A2cOkVMH7Ka4iN0gFvq6fLhV",
                    "locals": []
                  },
                  {
                    "expr": ":data #D1OUx1tH7mnfiwki4Zynih7V .add ,( $xqGFrJ9gVn5s8TmzQL7UySqGL0 ,)",
                    "nodeType": "exprStmt",
                    "id": "LTXegOeRT3meI9vHxLAKuMNQ",
                    "locals": []
                  },
                  {
                    "expr": ":records #O2549tFd2N7eNsF4zAdbOTrB .at ,( $xqGFrJ9gVn5s8TmzQL7UySqGL0 ,) .tower .set ,( $xi4DlbnHmwwbcTA2D1Kj4ERtL0 ,)",
                    "nodeType": "exprStmt",
                    "id": "xSztsBWdP6RfCKa3TfUCHnF2",
                    "locals": []
                  }
                ],
                "isElseIf": false,
                "id": "s4jl9kjQ8axNOzDaK2KRu6mU",
                "locals": []
              }
            ],
            "id": "uvQJT7Dmz9hBIwkVxxpUyOUJ"
          },
          {
            "name": "start",
            "comment": "start time\n",
            "type": "DateTime",
            "isReadonly": false,
            "isTransient": false,
            "nodeType": "data",
            "id": "xR3Vy4LO3QjZq7jdxtZAg785"
          },
          {
            "name": "tower range set",
            "comment": "",
            "type": "Sprite Set",
            "isReadonly": false,
            "isTransient": true,
            "nodeType": "data",
            "id": "D1OUx1tH7mnfiwki4Zynih7V"
          },
          {
            "nodeType": "record",
            "name": "thing",
            "sourceName": "Sprite decorator",
            "comment": "",
            "category": "decorator",
            "isCloudEnabled": false,
            "keys": [
              {
                "nodeType": "recordKey",
                "name": "target",
                "type": "Sprite",
                "id": "QTE1NH7PcPw62Ql7r9m3EAns"
              }
            ],
            "fields": [
              {
                "nodeType": "recordField",
                "name": "tower",
                "type": "{\"o\":\"tower\"}",
                "id": "GecSOcLNEORdusyj6mnZeAhx"
              },
              {
                "nodeType": "recordField",
                "name": "attacker",
                "type": "{\"o\":\"attacker\"}",
                "id": "ka36T4V7HvBPCczqUbjWhwZ4"
              }
            ],
            "id": "O2549tFd2N7eNsF4zAdbOTrB"
          },
          {
            "name": "towers shoot attacker",
            "inParameters": [
              {
                "name": "attack",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "LFLUSzqu4jfUPSNFocQaZGO4P0"
              },
              {
                "name": "elapsed",
                "type": "Number",
                "nodeType": "localDef",
                "id": "LFLUSzqu4jfUPSNFocQaZGO4P1"
              }
            ],
            "outParameters": [],
            "isPrivate": true,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "expr": "$TZThf8m4jrDKBSZsBpCqmiPdL0 ,:= $LFLUSzqu4jfUPSNFocQaZGO4P0 .overlap_with ,( :data #D1OUx1tH7mnfiwki4Zynih7V ,)",
                "nodeType": "exprStmt",
                "id": "TZThf8m4jrDKBSZsBpCqmiPd",
                "locals": [
                  {
                    "name": "in range towers",
                    "type": "Sprite Set",
                    "nodeType": "localDef",
                    "id": "TZThf8m4jrDKBSZsBpCqmiPdL0"
                  }
                ]
              },
              {
                "collection": "$TZThf8m4jrDKBSZsBpCqmiPdL0",
                "conditions": [
                  {
                    "condition": "T",
                    "nodeType": "where",
                    "id": "xw4G4XfGrdCOCLw8cukYjYMP",
                    "locals": []
                  }
                ],
                "body": [
                  {
                    "expr": "$re98AafXcSemhKVJUsKf3Zn7L0 ,:= :records #O2549tFd2N7eNsF4zAdbOTrB .at ,( $ATRP7pjT5FaC1X4QAH45ExFKB0 ,) .tower .get",
                    "nodeType": "exprStmt",
                    "id": "re98AafXcSemhKVJUsKf3Zn7",
                    "locals": [
                      {
                        "name": "tow",
                        "type": "{\"o\":\"tower\"}",
                        "nodeType": "localDef",
                        "id": "re98AafXcSemhKVJUsKf3Zn7L0"
                      }
                    ]
                  },
                  {
                    "expr": ":code #ZMH8rjmYvxoF4ECG2qMwMKzC ,( $LFLUSzqu4jfUPSNFocQaZGO4P0 ,, $re98AafXcSemhKVJUsKf3Zn7L0 ,, $LFLUSzqu4jfUPSNFocQaZGO4P1 ,)",
                    "nodeType": "exprStmt",
                    "id": "AQmlRaRWOLWoN5tMeH6nu3wm",
                    "locals": []
                  }
                ],
                "nodeType": "foreach",
                "id": "ATRP7pjT5FaC1X4QAH45ExFK",
                "locals": [
                  {
                    "name": "tower range",
                    "type": "Sprite",
                    "nodeType": "localDef",
                    "id": "ATRP7pjT5FaC1X4QAH45ExFKB0"
                  }
                ]
              }
            ],
            "id": "LFLUSzqu4jfUPSNFocQaZGO4"
          },
          {
            "name": "tower shoot attacker",
            "inParameters": [
              {
                "name": "attack",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "ZMH8rjmYvxoF4ECG2qMwMKzCP0"
              },
              {
                "name": "tow",
                "type": "{\"o\":\"tower\"}",
                "nodeType": "localDef",
                "id": "ZMH8rjmYvxoF4ECG2qMwMKzCP1"
              },
              {
                "name": "elapsed",
                "type": "Number",
                "nodeType": "localDef",
                "id": "ZMH8rjmYvxoF4ECG2qMwMKzCP2"
              }
            ],
            "outParameters": [],
            "isPrivate": true,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "nodeType": "if",
                "condition": "$ZMH8rjmYvxoF4ECG2qMwMKzCP1 .next_shot .get ,< $ZMH8rjmYvxoF4ECG2qMwMKzCP2",
                "thenBody": [
                  {
                    "text": "Delay between shots",
                    "nodeType": "comment",
                    "id": "zo8VR4mxeG3HkZeZCI3Sy3i4"
                  },
                  {
                    "expr": "$ZMH8rjmYvxoF4ECG2qMwMKzCP1 .next_shot .set ,( $ZMH8rjmYvxoF4ECG2qMwMKzCP2 ,+ $ZMH8rjmYvxoF4ECG2qMwMKzCP1 .reload .get ,)",
                    "nodeType": "exprStmt",
                    "id": "SjYO9VdQ54luq1e8sUEyP4Ms",
                    "locals": []
                  },
                  {
                    "text": "Add new bullet in game",
                    "nodeType": "comment",
                    "id": "ATBSKQd1YJk4p87ZzdN2gxX7"
                  },
                  {
                    "expr": "$wCzrvqArivJQf4c7asBxa4wML0 ,:= $ZMH8rjmYvxoF4ECG2qMwMKzCP1 .energy .get",
                    "nodeType": "exprStmt",
                    "id": "wCzrvqArivJQf4c7asBxa4wM",
                    "locals": [
                      {
                        "name": "energy",
                        "type": "Number",
                        "nodeType": "localDef",
                        "id": "wCzrvqArivJQf4c7asBxa4wML0"
                      }
                    ]
                  },
                  {
                    "expr": "$xHxrd6PCo92Pgf0zjGNBZSpML0 ,:= :data #rU0VbM5g9eNQBN84xi1Xfyaw .create_ellipse ,( $wCzrvqArivJQf4c7asBxa4wML0 ,/ ,2 ,, $wCzrvqArivJQf4c7asBxa4wML0 ,/ ,2 ,)",
                    "nodeType": "exprStmt",
                    "id": "xHxrd6PCo92Pgf0zjGNBZSpM",
                    "locals": [
                      {
                        "name": "bullet",
                        "type": "Sprite",
                        "nodeType": "localDef",
                        "id": "xHxrd6PCo92Pgf0zjGNBZSpML0"
                      }
                    ]
                  },
                  {
                    "expr": "$wtu6krKE2mBcVHNDJSIbNrQzL0 ,:= $ZMH8rjmYvxoF4ECG2qMwMKzCP1 .sprite .get",
                    "nodeType": "exprStmt",
                    "id": "wtu6krKE2mBcVHNDJSIbNrQz",
                    "locals": [
                      {
                        "name": "tower sprite",
                        "type": "Sprite",
                        "nodeType": "localDef",
                        "id": "wtu6krKE2mBcVHNDJSIbNrQzL0"
                      }
                    ]
                  },
                  {
                    "expr": "$xHxrd6PCo92Pgf0zjGNBZSpML0 .set_pos ,( $wtu6krKE2mBcVHNDJSIbNrQzL0 .x ,, $wtu6krKE2mBcVHNDJSIbNrQzL0 .y ,)",
                    "nodeType": "exprStmt",
                    "id": "fgVHY8MJEolqvVy7ADfzuW6M",
                    "locals": []
                  },
                  {
                    "expr": "$xHxrd6PCo92Pgf0zjGNBZSpML0 .speed_towards ,( $ZMH8rjmYvxoF4ECG2qMwMKzCP0 ,, :math .max ,( ,3 ,0 ,, ,1 ,0 ,0 ,- $wCzrvqArivJQf4c7asBxa4wML0 ,) ,)",
                    "nodeType": "exprStmt",
                    "id": "yuXgQk1lhLfgxzVYd8yE7sPx",
                    "locals": []
                  },
                  {
                    "expr": "$xHxrd6PCo92Pgf0zjGNBZSpML0 .set_color ,( $ZMH8rjmYvxoF4ECG2qMwMKzCP1 .bullet_color .get ,)",
                    "nodeType": "exprStmt",
                    "id": "RID0oBSortdnCkoMM7cX1QzV",
                    "locals": []
                  },
                  {
                    "expr": ":data #Tnk15jveIb2DD9EFdOup1pwv .add ,( $xHxrd6PCo92Pgf0zjGNBZSpML0 ,)",
                    "nodeType": "exprStmt",
                    "id": "x4BZ4BXODD1VahodLPRBEmj1",
                    "locals": []
                  },
                  {
                    "expr": ":records #O2549tFd2N7eNsF4zAdbOTrB .at ,( $xHxrd6PCo92Pgf0zjGNBZSpML0 ,) .tower .set ,( $ZMH8rjmYvxoF4ECG2qMwMKzCP1 ,)",
                    "nodeType": "exprStmt",
                    "id": "HTj2itY7cXToyitCH2crsnH8",
                    "locals": []
                  }
                ],
                "isElseIf": false,
                "id": "One8GMZn2XfvdPev3X6uU5Xa",
                "locals": []
              }
            ],
            "id": "ZMH8rjmYvxoF4ECG2qMwMKzC"
          },
          {
            "name": "score",
            "comment": "",
            "type": "Number",
            "isReadonly": false,
            "isTransient": false,
            "nodeType": "data",
            "id": "iA6QEJXaFbriHztBBoJNdyEd"
          },
          {
            "name": "earned life",
            "inParameters": [],
            "outParameters": [
              {
                "name": "r",
                "type": "Number",
                "nodeType": "localDef",
                "id": "qGZvMdZZnyOYpNZYhUpIcmWzP0"
              }
            ],
            "isPrivate": false,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "text": "Gets the sum of life of attacker destroyed",
                "nodeType": "comment",
                "id": "la1QBzhpW9oHdZUk4KXkW0GM"
              },
              {
                "expr": "$qGZvMdZZnyOYpNZYhUpIcmWzP0 ,:= :data #iA6QEJXaFbriHztBBoJNdyEd",
                "nodeType": "exprStmt",
                "id": "mdC9vB4zlRQ7d5YSpyEO87pd",
                "locals": []
              }
            ],
            "id": "qGZvMdZZnyOYpNZYhUpIcmWz"
          },
          {
            "name": "bullets shoot attacker",
            "inParameters": [
              {
                "name": "attack",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "gmGrS4wcK8sDPLo2QSBNQJkyP0"
              }
            ],
            "outParameters": [],
            "isPrivate": true,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "expr": "$GV4tUJBNODQn3aAoIRm5YNMtL0 ,:= :records #O2549tFd2N7eNsF4zAdbOTrB .at ,( $gmGrS4wcK8sDPLo2QSBNQJkyP0 ,) .attacker .get",
                "nodeType": "exprStmt",
                "id": "GV4tUJBNODQn3aAoIRm5YNMt",
                "locals": [
                  {
                    "name": "arow",
                    "type": "{\"o\":\"attacker\"}",
                    "nodeType": "localDef",
                    "id": "GV4tUJBNODQn3aAoIRm5YNMtL0"
                  }
                ]
              },
              {
                "expr": "$tKtMuAfCrRVvr3VMrTfNYwLTL0 ,:= $gmGrS4wcK8sDPLo2QSBNQJkyP0 .overlap_with ,( :data #Tnk15jveIb2DD9EFdOup1pwv ,)",
                "nodeType": "exprStmt",
                "id": "tKtMuAfCrRVvr3VMrTfNYwLT",
                "locals": [
                  {
                    "name": "in range bullets",
                    "type": "Sprite Set",
                    "nodeType": "localDef",
                    "id": "tKtMuAfCrRVvr3VMrTfNYwLTL0"
                  }
                ]
              },
              {
                "collection": "$tKtMuAfCrRVvr3VMrTfNYwLTL0",
                "conditions": [
                  {
                    "condition": "$GV4tUJBNODQn3aAoIRm5YNMtL0 .life .get ,≥ ,0",
                    "nodeType": "where",
                    "id": "MvJCBjRI2bla9RQaSswTVr5S",
                    "locals": []
                  }
                ],
                "body": [
                  {
                    "expr": ":code #kgPe1oEOkH2rkA2ZZEWY8T7E ,( $gmGrS4wcK8sDPLo2QSBNQJkyP0 ,, $kdMJwTlBJWf3asSHBVWATsPaB0 ,, $GV4tUJBNODQn3aAoIRm5YNMtL0 ,)",
                    "nodeType": "exprStmt",
                    "id": "xVLxOg7S5RH4G1KgFw5iQJFB",
                    "locals": []
                  }
                ],
                "nodeType": "foreach",
                "id": "kdMJwTlBJWf3asSHBVWATsPa",
                "locals": [
                  {
                    "name": "bullet",
                    "type": "Sprite",
                    "nodeType": "localDef",
                    "id": "kdMJwTlBJWf3asSHBVWATsPaB0"
                  }
                ]
              }
            ],
            "id": "gmGrS4wcK8sDPLo2QSBNQJky"
          },
          {
            "name": "bullet shoot attacker",
            "inParameters": [
              {
                "name": "attack",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "kgPe1oEOkH2rkA2ZZEWY8T7EP0"
              },
              {
                "name": "bullet",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "kgPe1oEOkH2rkA2ZZEWY8T7EP1"
              },
              {
                "name": "arow",
                "type": "{\"o\":\"attacker\"}",
                "nodeType": "localDef",
                "id": "kgPe1oEOkH2rkA2ZZEWY8T7EP2"
              }
            ],
            "outParameters": [],
            "isPrivate": true,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "text": "Remove life from attacker",
                "nodeType": "comment",
                "id": "Vi82YMhcbZPwjoouQ2L64lv2"
              },
              {
                "expr": "$QO4R0Yxn0smxcMhfWvAdPTOdL0 ,:= $kgPe1oEOkH2rkA2ZZEWY8T7EP1 .width",
                "nodeType": "exprStmt",
                "id": "QO4R0Yxn0smxcMhfWvAdPTOd",
                "locals": [
                  {
                    "name": "strength",
                    "type": "Number",
                    "nodeType": "localDef",
                    "id": "QO4R0Yxn0smxcMhfWvAdPTOdL0"
                  }
                ]
              },
              {
                "expr": "$QO4R0Yxn0smxcMhfWvAdPTOdL0 ,:= :math .min ,( $QO4R0Yxn0smxcMhfWvAdPTOdL0 ,, $kgPe1oEOkH2rkA2ZZEWY8T7EP2 .life .get ,)",
                "nodeType": "exprStmt",
                "id": "tjTCchG8odxYpk6FVzXK1MRi",
                "locals": []
              },
              {
                "expr": ":data #iA6QEJXaFbriHztBBoJNdyEd ,:= :data #iA6QEJXaFbriHztBBoJNdyEd ,- $QO4R0Yxn0smxcMhfWvAdPTOdL0",
                "nodeType": "exprStmt",
                "id": "CnKWttzbMDSPuRfN322Aeyv5",
                "locals": []
              },
              {
                "expr": "$kgPe1oEOkH2rkA2ZZEWY8T7EP2 .life .set ,( $kgPe1oEOkH2rkA2ZZEWY8T7EP2 .life .get ,- $QO4R0Yxn0smxcMhfWvAdPTOdL0 ,)",
                "nodeType": "exprStmt",
                "id": "Jd1GTychwwJDHODxYhqzIAO4",
                "locals": []
              },
              {
                "expr": ":/267b #xjL80eKjfViGRrmIGfIde4Fd #hf7qS7LKczXNcc4R6YZEIWjr ,( $kgPe1oEOkH2rkA2ZZEWY8T7EP2 .sprite .get ,, $kgPe1oEOkH2rkA2ZZEWY8T7EP2 .life .get ,/ $kgPe1oEOkH2rkA2ZZEWY8T7EP2 .max_life .get ,)",
                "nodeType": "exprStmt",
                "id": "k1ltzV8NXyh1DtW1YmqS3jdw",
                "locals": []
              },
              {
                "expr": ":code #xTf4Bhlic0bDBmTq19YNCDw4 ,( $kgPe1oEOkH2rkA2ZZEWY8T7EP1 ,)",
                "nodeType": "exprStmt",
                "id": "xlbgukwWd23OSBNL4XPuJ4OL",
                "locals": []
              },
              {
                "text": "Test if attacker is still alive",
                "nodeType": "comment",
                "id": "xtmRi83TLPcpL32rQt5Y266h"
              },
              {
                "nodeType": "if",
                "condition": "$kgPe1oEOkH2rkA2ZZEWY8T7EP2 .life .get ,≤ ,0",
                "thenBody": [
                  {
                    "expr": ":/267b #xjL80eKjfViGRrmIGfIde4Fd #cKA0zMVSAxIKS3G4Hk1dquSx ,( $kgPe1oEOkH2rkA2ZZEWY8T7EP2 .sprite .get ,)",
                    "nodeType": "exprStmt",
                    "id": "E04NkdhmuZ4HHIr1lvBIURYp",
                    "locals": []
                  },
                  {
                    "expr": ":code #ZTx4v24MqTwjavaIHyhOL4fw ,( $kgPe1oEOkH2rkA2ZZEWY8T7EP2 ,, $kgPe1oEOkH2rkA2ZZEWY8T7EP0 ,)",
                    "nodeType": "exprStmt",
                    "id": "AJtbAasW2CyUujihpxDbXEI7",
                    "locals": []
                  }
                ],
                "isElseIf": false,
                "id": "XlyeHnBRGKHgTihsaMzQ7TBC",
                "locals": []
              }
            ],
            "id": "kgPe1oEOkH2rkA2ZZEWY8T7E"
          },
          {
            "name": "add attacker",
            "inParameters": [
              {
                "name": "sprite",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "qzFUk5Ix9k0vXz9Odq4oByYTP0"
              },
              {
                "name": "life",
                "type": "Number",
                "nodeType": "localDef",
                "id": "qzFUk5Ix9k0vXz9Odq4oByYTP1"
              }
            ],
            "outParameters": [],
            "isPrivate": false,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "text": "Adds a tower with a range, power and reload in seconds.",
                "nodeType": "comment",
                "id": "tHyIE8lR9Lhhy4GCxmSqA65J"
              },
              {
                "nodeType": "if",
                "condition": ":data #FdyzjG6w1KZ5fgxxFI6V8FnD .add ,( $qzFUk5Ix9k0vXz9Odq4oByYTP0 ,)",
                "thenBody": [
                  {
                    "expr": "$gVggkQiSYBLOXSmHivzs4uvhL0 ,:= :records #RMDI0jsK3ubgYNNvIeKVzGNv .create",
                    "nodeType": "exprStmt",
                    "id": "gVggkQiSYBLOXSmHivzs4uvh",
                    "locals": [
                      {
                        "name": "t",
                        "type": "{\"o\":\"attacker\"}",
                        "nodeType": "localDef",
                        "id": "gVggkQiSYBLOXSmHivzs4uvhL0"
                      }
                    ]
                  },
                  {
                    "expr": "$gVggkQiSYBLOXSmHivzs4uvhL0 .sprite .set ,( $qzFUk5Ix9k0vXz9Odq4oByYTP0 ,)",
                    "nodeType": "exprStmt",
                    "id": "K6QoYhv554QH2ynlq1rWW5on",
                    "locals": []
                  },
                  {
                    "expr": "$gVggkQiSYBLOXSmHivzs4uvhL0 .life .set ,( $qzFUk5Ix9k0vXz9Odq4oByYTP1 ,)",
                    "nodeType": "exprStmt",
                    "id": "vmz6M2FWL6GrNgtd2P3g9pSp",
                    "locals": []
                  },
                  {
                    "expr": "$gVggkQiSYBLOXSmHivzs4uvhL0 .max_life .set ,( $qzFUk5Ix9k0vXz9Odq4oByYTP1 ,)",
                    "nodeType": "exprStmt",
                    "id": "kVoBt6yHxqgOggqXi1aqHdB8",
                    "locals": []
                  },
                  {
                    "expr": ":records #O2549tFd2N7eNsF4zAdbOTrB .at ,( $qzFUk5Ix9k0vXz9Odq4oByYTP0 ,) .attacker .set ,( $gVggkQiSYBLOXSmHivzs4uvhL0 ,)",
                    "nodeType": "exprStmt",
                    "id": "u2w1Oy5gyUpDjM4D1wYfCksA",
                    "locals": []
                  },
                  {
                    "expr": ":/267b #xjL80eKjfViGRrmIGfIde4Fd #hf7qS7LKczXNcc4R6YZEIWjr ,( $qzFUk5Ix9k0vXz9Odq4oByYTP0 ,, ,1 ,)",
                    "nodeType": "exprStmt",
                    "id": "xkGiDmTZZcKNs1LBnOhVEh1O",
                    "locals": []
                  }
                ],
                "isElseIf": false,
                "id": "xQH7pYrZpO9ld4GB5lXL6ixC",
                "locals": []
              }
            ],
            "id": "qzFUk5Ix9k0vXz9Odq4oByYT"
          },
          {
            "name": "delete bullet",
            "inParameters": [
              {
                "name": "bullet",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "xTf4Bhlic0bDBmTq19YNCDw4P0"
              }
            ],
            "outParameters": [],
            "isPrivate": true,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "text": "Remove bullet",
                "nodeType": "comment",
                "id": "mT60WE4YnuSnNjDZENMcyTF4"
              },
              {
                "expr": "$xTf4Bhlic0bDBmTq19YNCDw4P0 .hide",
                "nodeType": "exprStmt",
                "id": "x4xtKkkxDvvi2dN2eDKfwzeT",
                "locals": []
              },
              {
                "expr": ":data #Tnk15jveIb2DD9EFdOup1pwv .remove ,( $xTf4Bhlic0bDBmTq19YNCDw4P0 ,)",
                "nodeType": "exprStmt",
                "id": "xY1rl4dZBqlCgTjsuJL4cj2A",
                "locals": []
              },
              {
                "expr": "$xTf4Bhlic0bDBmTq19YNCDw4P0 .delete",
                "nodeType": "exprStmt",
                "id": "jwTNYsyybEPE37DnjuEgTgt0",
                "locals": []
              }
            ],
            "id": "xTf4Bhlic0bDBmTq19YNCDw4"
          },
          {
            "name": "delete attacker",
            "inParameters": [
              {
                "name": "arow",
                "type": "{\"o\":\"attacker\"}",
                "nodeType": "localDef",
                "id": "ZTx4v24MqTwjavaIHyhOL4fwP0"
              },
              {
                "name": "attack",
                "type": "Sprite",
                "nodeType": "localDef",
                "id": "ZTx4v24MqTwjavaIHyhOL4fwP1"
              }
            ],
            "outParameters": [],
            "isPrivate": true,
            "isOffloaded": false,
            "isTest": false,
            "isAsync": false,
            "nodeType": "action",
            "body": [
              {
                "expr": "$ZTx4v24MqTwjavaIHyhOL4fwP0 .clear_fields",
                "nodeType": "exprStmt",
                "id": "KG2bF3xjidAL33PuNvFMcoMG",
                "locals": []
              },
              {
                "expr": "$ZTx4v24MqTwjavaIHyhOL4fwP1 .hide",
                "nodeType": "exprStmt",
                "id": "xjBFmG2afr6RP6yq2v2Ii9NX",
                "locals": []
              },
              {
                "expr": ":data #FdyzjG6w1KZ5fgxxFI6V8FnD .remove ,( $ZTx4v24MqTwjavaIHyhOL4fwP1 ,)",
                "nodeType": "exprStmt",
                "id": "c3zSRFRjJt2UXaf3OQ4yr3LG",
                "locals": []
              },
              {
                "expr": "$ZTx4v24MqTwjavaIHyhOL4fwP1 .delete",
                "nodeType": "exprStmt",
                "id": "Q9cu6GzPLYqf4nDNCuRQMEuH",
                "locals": []
              }
            ],
            "id": "ZTx4v24MqTwjavaIHyhOL4fw"
          },
          {
            "nodeType": "library",
            "name": "life indicator",
            "libIdentifier": "lvtja",
            "libIsPublished": true,
            "scriptName": null,
            "exportedTypes": "",
            "exportedActions": [
              {
                "name": "example",
                "inParameters": [],
                "outParameters": [],
                "isPrivate": false,
                "isOffloaded": false,
                "isTest": false,
                "isAsync": false,
                "nodeType": "libAction",
                "parentLibId": "xjL80eKjfViGRrmIGfIde4Fd",
                "id": "uYabVC8R4dSmDAI5PXkQ021I"
              },
              {
                "name": "initialize",
                "inParameters": [
                  {
                    "name": "board",
                    "type": "Board",
                    "nodeType": "localDef",
                    "id": "xIUy33R9FTdTX1NnCH2mVAOjP0"
                  }
                ],
                "outParameters": [],
                "isPrivate": false,
                "isOffloaded": false,
                "isTest": false,
                "isAsync": false,
                "nodeType": "libAction",
                "parentLibId": "xjL80eKjfViGRrmIGfIde4Fd",
                "id": "xIUy33R9FTdTX1NnCH2mVAOj"
              },
              {
                "name": "evolve",
                "inParameters": [],
                "outParameters": [],
                "isPrivate": false,
                "isOffloaded": false,
                "isTest": false,
                "isAsync": false,
                "nodeType": "libAction",
                "parentLibId": "xjL80eKjfViGRrmIGfIde4Fd",
                "id": "vkK4u6PrWz4xNVlQoNAoZiXD"
              },
              {
                "name": "show life",
                "inParameters": [
                  {
                    "name": "sprite",
                    "type": "Sprite",
                    "nodeType": "localDef",
                    "id": "hf7qS7LKczXNcc4R6YZEIWjrP0"
                  },
                  {
                    "name": "life",
                    "type": "Number",
                    "nodeType": "localDef",
                    "id": "hf7qS7LKczXNcc4R6YZEIWjrP1"
                  }
                ],
                "outParameters": [],
                "isPrivate": false,
                "isOffloaded": false,
                "isTest": false,
                "isAsync": false,
                "nodeType": "libAction",
                "parentLibId": "xjL80eKjfViGRrmIGfIde4Fd",
                "id": "hf7qS7LKczXNcc4R6YZEIWjr"
              },
              {
                "name": "hide life",
                "inParameters": [
                  {
                    "name": "sprite",
                    "type": "Sprite",
                    "nodeType": "localDef",
                    "id": "cKA0zMVSAxIKS3G4Hk1dquSxP0"
                  }
                ],
                "outParameters": [],
                "isPrivate": false,
                "isOffloaded": false,
                "isTest": false,
                "isAsync": false,
                "nodeType": "libAction",
                "parentLibId": "xjL80eKjfViGRrmIGfIde4Fd",
                "id": "cKA0zMVSAxIKS3G4Hk1dquSx"
              }
            ],
            "resolveClauses": [],
            "id": "xjL80eKjfViGRrmIGfIde4Fd"
          }
        ],
        "deletedDecls": [],
        "nodeType": "app",
        "id": "app"
      }
    },
    {
      "seqNo": 1,
      "time": 1354910984,
      "scriptId": "zbgy",
      "historyId": "2520473898154042735da3f7c6e-0d5a-4015-99f2-e934ff0f0add",
      "updateSize": 2,
      "updates": {}
    }
  ]
}